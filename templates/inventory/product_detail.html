<!DOCTYPE html>
<html>
<head>
    <title>{{ product.name }} - Product Details</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <h1>{{ product.name }}</h1>
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">Product Information</h5>
                <p><strong>ID:</strong> {{ product.id }}</p>
                <p><strong>SKU:</strong> {{ product.sku }}</p>
                <p><strong>Category:</strong> 
                    {% if product.category %}
                        {{ product.category.name }}
                    {% else %}
                        No Category
                    {% endif %}
                </p>
                <p><strong>Purchase Price:</strong> ₹{{ "%.2f"|format(product.purchase_price) }}</p>
                <p><strong>Selling Price:</strong> ₹{{ "%.2f"|format(product.selling_price) }}</p>
                <p><strong>Available Stock:</strong> {{ available_stock }}</p>
                <p><strong>Total Stock Items:</strong> {{ stock_items|length }}</p>
                <p><strong>Status:</strong> 
                    <span class="badge bg-{% if product.is_active %}success{% else %}danger{% endif %}">
                        {% if product.is_active %}Active{% else %}Inactive{% endif %}
                    </span>
                </p>
                
                <div class="mt-3">
                    <a href="/inventory/products" class="btn btn-primary">Back to Products</a>
                    <a href="/inventory/stock-in?product_id={{ product.id }}" class="btn btn-success">Stock In</a>
                </div>
            </div>
        </div>
        
        <!-- Stock Items Table -->
        {% if stock_items %}
        <div class="card mt-4">
            <div class="card-header">
                <h5 class="mb-0">Stock Items ({{ stock_items|length }})</h5>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Status</th>
                                <th>Batch</th>
                                <th>IMEI</th>
                                <th>Created</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for item in stock_items %}
                            <tr>
                                <td>{{ item.id }}</td>
                                <td>
                                    <span class="badge bg-{% if item.status == 'available' %}success{% else %}secondary{% endif %}">
                                        {{ item.status }}
                                    </span>
                                </td>
                                <td>{{ item.batch_number or '-' }}</td>
                                <td>{{ item.imei or '-' }}</td>
                                <td>{{ item.created_at.strftime('%Y-%m-%d') }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
</body>
</html>