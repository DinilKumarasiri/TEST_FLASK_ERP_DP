{% extends "base.html" %}

{% block title %}Barcode Scanner Setup Guide - Mobile Shop ERP{% endblock %}

{% block extra_css %}
<style>
    .guide-container {
        max-width: 800px;
        margin: 0 auto;
    }
    
    .setup-step {
        background: white;
        border-radius: 10px;
        padding: 25px;
        margin-bottom: 20px;
        border-left: 4px solid #4361ee;
        box-shadow: 0 5px 15px rgba(0,0,0,0.05);
    }
    
    .step-number {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        background: #4361ee;
        color: white;
        border-radius: 50%;
        font-weight: bold;
        font-size: 20px;
        margin-right: 15px;
    }
    
    .hardware-list {
        list-style: none;
        padding-left: 0;
    }
    
    .hardware-item {
        padding: 15px;
        margin-bottom: 10px;
        border-radius: 8px;
        background: #f8f9fa;
        border-left: 4px solid;
    }
    
    .hardware-item.usb {
        border-left-color: #198754;
    }
    
    .hardware-item.bluetooth {
        border-left-color: #0dcaf0;
    }
    
    .hardware-item.wireless {
        border-left-color: #ffc107;
    }
    
    .test-scanner {
        background: #e7f1ff;
        border-radius: 10px;
        padding: 25px;
        text-align: center;
        margin: 30px 0;
    }
    
    .test-input {
        font-size: 20px;
        height: 50px;
        text-align: center;
        margin: 20px auto;
        max-width: 300px;
    }
    
    .troubleshooting {
        background: #fff3cd;
        border-left: 4px solid #ffc107;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
    }
    
    .feature-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin: 30px 0;
    }
    
    .feature-card {
        background: white;
        padding: 20px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        transition: transform 0.3s;
    }
    
    .feature-card:hover {
        transform: translateY(-5px);
    }
    
    .feature-icon {
        font-size: 40px;
        color: #4361ee;
        margin-bottom: 15px;
    }
</style>
{% endblock %}

{% block content %}
<div class="guide-container">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2><i class="fas fa-qrcode me-2"></i>Barcode Scanner Setup Guide</h2>
        <a href="{{ url_for('employee.barcode_attendance_interface') }}" class="btn btn-primary">
            <i class="fas fa-barcode me-1"></i> Go to Scanner
        </a>
    </div>
    
    <!-- Introduction -->
    <div class="setup-step">
        <h3 class="mb-3"><span class="step-number">1</span>Introduction</h3>
        <p>The barcode attendance system allows employees to check in and out using their unique barcode ID. 
           This guide will help you set up and configure the barcode scanner hardware.</p>
        
        <div class="feature-grid">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-bolt"></i>
                </div>
                <h5>Quick Setup</h5>
                <p>Plug and play configuration</p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-clock"></i>
                </div>
                <h5>Automatic Timing</h5>
                <p>Smart check-in/out detection</p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-bell"></i>
                </div>
                <h5>Real-time Alerts</h5>
                <p>Immediate feedback on scans</p>
            </div>
        </div>
    </div>
    
    <!-- Hardware Selection -->
    <div class="setup-step">
        <h3 class="mb-3"><span class="step-number">2</span>Hardware Selection</h3>
        <p>Choose a compatible barcode scanner from the options below:</p>
        
        <ul class="hardware-list">
            <li class="hardware-item usb">
                <h5><i class="fas fa-usb me-2"></i>USB Barcode Scanner</h5>
                <p class="mb-1"><strong>Recommended:</strong> Plug-and-play, works as keyboard input</p>
                <small class="text-muted">Examples: Honeywell Voyager, Symbol LS2208</small>
            </li>
            
            <li class="hardware-item bluetooth">
                <h5><i class="fas fa-bluetooth me-2"></i>Bluetooth Scanner</h5>
                <p class="mb-1"><strong>Wireless:</strong> Connects via Bluetooth to computer/tablet</p>
                <small class="text-muted">Examples: Socket Mobile S700, Zebra DS2208</small>
            </li>
            
            <li class="hardware-item wireless">
                <h5><i class="fas fa-wifi me-2"></i>Wireless 2D Scanner</h5>
                <p class="mb-1"><strong>Advanced:</strong> Scans QR codes and barcodes</p>
                <small class="text-muted">Examples: Zebra DS8178, Honeywell 1900</small>
            </li>
        </ul>
    </div>
    
    <!-- Setup Instructions -->
    <div class="setup-step">
        <h3 class="mb-3"><span class="step-number">3</span>Setup Instructions</h3>
        
        <div class="mb-4">
            <h5><i class="fas fa-plug me-2"></i>USB Scanner Setup</h5>
            <ol>
                <li>Plug the scanner into an available USB port on the attendance computer</li>
                <li>Wait for Windows/Mac to install drivers automatically (usually takes 1-2 minutes)</li>
                <li>Open the <a href="{{ url_for('employee.barcode_attendance_interface') }}">Barcode Attendance Scanner</a> page</li>
                <li>Click in the scanner input field to focus it</li>
                <li>Test by scanning an employee barcode</li>
            </ol>
        </div>
        
        <div class="mb-4">
            <h5><i class="fas fa-bluetooth me-2"></i>Bluetooth Scanner Setup</h5>
            <ol>
                <li>Turn on the scanner and put it in pairing mode (check manufacturer instructions)</li>
                <li>On the computer, go to Bluetooth settings and add the scanner as a device</li>
                <li>Pair using the default PIN (usually 0000 or 1234)</li>
                <li>Once connected, the scanner will act as a wireless keyboard</li>
                <li>Proceed to test scanning as with USB scanner</li>
            </ol>
        </div>
    </div>
    
    <!-- Test Scanner -->
    <div class="test-scanner">
        <h4><i class="fas fa-vial me-2"></i>Test Your Scanner</h4>
        <p>Scan any barcode here to test if your scanner is working properly:</p>
        
        <input type="text" 
               class="form-control test-input" 
               id="testScannerInput" 
               placeholder="Scan barcode here..."
               autocomplete="off"
               autocapitalize="off">
        
        <div id="testResult" class="mt-3"></div>
        
        <small class="text-muted d-block mt-2">
            <i class="fas fa-info-circle me-1"></i>
            The scanner should automatically add a newline/enter after each scan
        </small>
    </div>
    
    <!-- Configuration Tips -->
    <div class="setup-step">
        <h3 class="mb-3"><span class="step-number">4</span>Configuration Tips</h3>
        
        <div class="row">
            <div class="col-md-6 mb-3">
                <div class="card h-100">
                    <div class="card-body">
                        <h6><i class="fas fa-cog me-2"></i>Scanner Settings</h6>
                        <ul class="mb-0">
                            <li>Set to "Keyboard Wedge" mode</li>
                            <li>Enable "Add Enter/Return" suffix</li>
                            <li>Disable beep if too loud</li>
                            <li>Set to continuous scan mode</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6 mb-3">
                <div class="card h-100">
                    <div class="card-body">
                        <h6><i class="fas fa-desktop me-2"></i>Computer Setup</h6>
                        <ul class="mb-0">
                            <li>Use a dedicated computer for attendance</li>
                            <li>Keep browser open to scanner page</li>
                            <li>Disable screensaver/sleep mode</li>
                            <li>Use full-screen mode (F11)</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Troubleshooting -->
    <div class="troubleshooting">
        <h4><i class="fas fa-tools me-2"></i>Troubleshooting</h4>
        
        <div class="accordion" id="troubleshootingAccordion">
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#problem1">
                        Scanner not working/not detected
                    </button>
                </h2>
                <div id="problem1" class="accordion-collapse collapse show" data-bs-parent="#troubleshootingAccordion">
                    <div class="accordion-body">
                        <ol>
                            <li>Check USB/Bluetooth connection</li>
                            <li>Try a different USB port</li>
                            <li>Restart the scanner and computer</li>
                            <li>Check if scanner needs charging (bluetooth models)</li>
                            <li>Test scanner with Notepad to see if it's typing</li>
                        </ol>
                    </div>
                </div>
            </div>
            
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#problem2">
                        Scanner beeps but no input appears
                    </button>
                </h2>
                <div id="problem2" class="accordion-collapse collapse" data-bs-parent="#troubleshootingAccordion">
                    <div class="accordion-body">
                        <ol>
                            <li>Click in the scanner input field</li>
                            <li>Check if another application has focus</li>
                            <li>Test with Notepad to confirm scanner works</li>
                            <li>Check browser compatibility (use Chrome/Firefox)</li>
                        </ol>
                    </div>
                </div>
            </div>
            
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#problem3">
                        Barcode scans but attendance not recorded
                    </button>
                </h2>
                <div id="problem3" class="accordion-collapse collapse" data-bs-parent="#troubleshootingAccordion">
                    <div class="accordion-body">
                        <ol>
                            <li>Verify barcode exists in employee database</li>
                            <li>Check if employee is active</li>
                            <li>Look for error message in scanner interface</li>
                            <li>Check network connection</li>
                            <li>Verify browser is not blocking scripts</li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Support Information -->
    <div class="setup-step">
        <h3 class="mb-3"><span class="step-number">5</span>Support & Maintenance</h3>
        
        <div class="row">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-body">
                        <h6><i class="fas fa-phone me-2"></i>Support Contact</h6>
                        <ul class="mb-0">
                            <li><strong>IT Support:</strong> support@mobileshop.com</li>
                            <li><strong>Phone:</strong> +1 (555) 123-4567</li>
                            <li><strong>Hours:</strong> Mon-Fri, 9 AM - 6 PM</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6">
                <div class="card">
                    <div class="card-body">
                        <h6><i class="fas fa-tasks me-2"></i>Regular Maintenance</h6>
                        <ul class="mb-0">
                            <li>Clean scanner lens weekly</li>
                            <li>Charge wireless scanners nightly</li>
                            <li>Update browser regularly</li>
                            <li>Backup attendance data weekly</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Test scanner functionality
    const testInput = document.getElementById('testScannerInput');
    const testResult = document.getElementById('testResult');
    
    testInput.addEventListener('input', function() {
        const scannedValue = this.value.trim();
        
        if (scannedValue.length > 0) {
            testResult.innerHTML = `
                <div class="alert alert-success">
                    <i class="fas fa-check-circle me-2"></i>
                    <strong>Scanner Working!</strong> Scanned value: <code>${scannedValue}</code>
                </div>
            `;
            
            // Clear after 5 seconds
            setTimeout(() => {
                this.value = '';
                testResult.innerHTML = '';
            }, 5000);
        }
    });
    
    // Keyboard shortcuts for guide
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && e.key === 'h') {
            e.preventDefault();
            document.querySelector('[href="{{ url_for('employee.barcode_attendance_interface') }}"]').click();
        }
    });
});
</script>
{% endblock %}